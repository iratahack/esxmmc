<!DOCTYPE html>
<html>
<head>
<title>ESXMMC: Routine at 0262</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html">ESXMMC</a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="257.html">0101</a>
</td>
<td class="up">Up: <a href="../maps/all.html#610">Map</a></td>
<td class="next">
Next: <a href="627.html">0273</a>
</td>
</tr>
</table>
<div class="description">0262: Normal Initialization</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="257.html">init</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">normalInit</td>
<td class="address-2"><span id="610"></span>0262</td>
<td class="instruction">call $2686</td>
<td class="comment-1" rowspan="1">Call into ESXDOS.SYS to see if Caps Shift is pressed. If not pressed, carry flag is set and a = ($2e8d). If pressed a = ($2e8d) ^ 3 and carry is clear.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="613"></span>0265</td>
<td class="instruction">and $02</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="615"></span>0267</td>
<td class="instruction">call nz,$266c</td>
<td class="comment-1" rowspan="1">If zero flag is not set, call into ESXDOS.SYS to perform the auto load operation (ESXDOS_SYS_AUTOLOAD). The auto- load filename is /SYS/AUTOBOOT.BAS</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="618"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="257.html">init</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">normalInit_0</td>
<td class="address-2"><span id="618"></span>026a</td>
<td class="instruction">call <a href="627.html">L0273</a></td>
<td class="comment-1" rowspan="1">Wait for SPACE to be released. If SPACE is held down it holds the startup sequence here so the user can read the screen.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="621"></span>026d</td>
<td class="instruction">ld hl,$0001</td>
<td class="comment-1" rowspan="1">Now continue the 48K ROM reset sequence. The 1st instruction (DI) of the ROM has already been executed. This caused the DivMMC memory mapper to kick-in and map the DivMMC ROM at address $0. The next instruction fetch came from address $1 of the DivMMC ROM which we are still executing from. hl contains the address we wich to continue executing from.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="624"></span>0270</td>
<td class="instruction">jp <a href="8187.html">L1ffb</a></td>
<td class="comment-1" rowspan="1">$1ffb is a special address. Executing an instruction at this address causes the DivMMC mapper to be reset so that the original 48K ROM is mapped in.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="257.html">0101</a>
</td>
<td class="up">Up: <a href="../maps/all.html#610">Map</a></td>
<td class="next">
Next: <a href="627.html">0273</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright"></div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.6.</div>
</footer>
</body>
</html>